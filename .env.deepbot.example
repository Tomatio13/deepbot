# =========================================================
# Deepbot runtime env (gateway/app only)
# This file must NOT contain upstream provider secrets.
# =========================================================
DISCORD_BOT_TOKEN=your_discord_bot_token
# Internal auth key for deepbot -> litellm.
# Must match LITELLM_MASTER_KEY in .env.litellm.
OPENAI_API_KEY=change-this-litellm-key
AUTH_PASSPHRASE=change-this-passphrase

# Model alias defined in config/litellm.yaml
OPENAI_MODEL_ID=gpt-4o-mini
STRANDS_MODEL_PROVIDER=openai
STRANDS_MODEL_CONFIG={"params":{"temperature":0.2}}

# App paths / runtime
DEEPBOT_CONFIG_DIR=/app/config
MCP_CONFIG_PATH=/app/config/mcp.json
MCP_HOST_GATEWAY=host.docker.internal
WORKSPACE_DIR=/workspace/bot-rw
BOT_RW_DIR=/workspace/bot-rw
AGENT_MEMORY_DIR=/workspace/bot-rw/agent-memory/memory
STRANDS_TOOL_CONSOLE_MODE=disable
BYPASS_TOOL_CONSENT=true
GOGCLI_KEYRING_BACKEND=file
GOG_KEYRING_PASSWORD=change-this-password
GOG_ACCOUNT=you@example.com

# Short-term memory settings
SESSION_MAX_TURNS=10
SESSION_TTL_MINUTES=30

# Gateway behavior
AUTO_REPLY_ALL=true
AUTO_THREAD_ENABLED=false
# Auto thread mode: keyword | channel
AUTO_THREAD_MODE=keyword
# Comma-separated trigger phrases used when AUTO_THREAD_MODE=keyword.
AUTO_THREAD_TRIGGER_KEYWORDS=スレッド立てて,/thread,thread please
# Comma-separated channel IDs filter (optional). If empty, no channel filter is applied.
AUTO_THREAD_CHANNEL_IDS=
# Thread auto-archive duration in minutes (e.g., 60, 1440, 4320, 10080)
AUTO_THREAD_ARCHIVE_MINUTES=1440
# Rename auto-created thread from the first substantial bot reply.
AUTO_THREAD_RENAME_FROM_REPLY=true
AGENT_TIMEOUT_SECONDS=45
BOT_FALLBACK_MESSAGE=今ちょっと調子が悪いです。少し待ってからもう一度お願いします。
BOT_PROCESSING_MESSAGE=お調べしますね。少しお待ちください。
LOG_LEVEL=INFO
DEEPBOT_TRANSCRIPT=true
DEEPBOT_TRANSCRIPT_DIR=/workspace/bot-rw/transcripts

# Dangerous tool controls
DANGEROUS_TOOLS_ENABLED=false
ENABLED_DANGEROUS_TOOLS=shell,file_read
SHELL_SRT_ENFORCED=true
SHELL_SRT_SETTINGS_PATH=/app/config/srt-settings.json
SHELL_DENY_PATH_PREFIXES=/app/.env,/app/.git,/app/config/AGENT.md,/app/config/mcp.json,/root/.ssh,/root/.gnupg,/root/.aws,/workspace/config/skills/nature-remo-skill/.env,/workspace/agent-memory/memory
TOOL_READ_ROOTS=/workspace/bot-rw,/tmp,/app/config/skills
TOOL_WRITE_ROOTS=/workspace/bot-rw,/tmp

# Optional: Claude Code sub-agent tool (disabled by default)
CLAUDE_SUBAGENT_ENABLED=false
CLAUDE_SUBAGENT_COMMAND=claude
CLAUDE_SUBAGENT_WORKDIR=/workspace/bot-rw
CLAUDE_SUBAGENT_TIMEOUT_SECONDS=300
CLAUDE_SUBAGENT_MODEL=
CLAUDE_SUBAGENT_SKIP_PERMISSIONS=false
CLAUDE_SUBAGENT_TRANSPORT=direct
CLAUDE_SUBAGENT_SIDECAR_URL=http://claude-runner:8787/v1/run
# Keep runner-side credentials in .env.claude
CLAUDE_SUBAGENT_SIDECAR_TOKEN=

# Optional: Claude Code-compatible hooks (disabled by default)
CLAUDE_HOOKS_ENABLED=false
CLAUDE_HOOKS_TIMEOUT_MS=5000
CLAUDE_HOOKS_FAIL_MODE=open
CLAUDE_HOOKS_SETTINGS_PATHS=.claude/settings.local.json,.claude/settings.json,~/.claude/settings.json

# Prompt/attachment security controls
DEFENDER_ENABLED=true
DEFENDER_DEFAULT_MODE=warn
DEFENDER_WARN_THRESHOLD=0.35
DEFENDER_BLOCK_THRESHOLD=0.95
DEFENDER_SANITIZE_MODE=full-redact
ATTACHMENT_ALLOWED_HOSTS=cdn.discordapp.com,media.discordapp.net

# Auth gate behavior
AUTH_REQUIRED=true
AUTH_COMMAND=/auth
AUTH_IDLE_TIMEOUT_MINUTES=15
AUTH_WINDOW_MINUTES=10
AUTH_MAX_RETRIES=3
AUTH_LOCK_MINUTES=30

# Cron jobs
CRON_ENABLED=false
CRON_JOBS_DIR=/workspace/bot-rw/jobs
CRON_DEFAULT_TIMEZONE=Asia/Tokyo
CRON_POLL_SECONDS=15
