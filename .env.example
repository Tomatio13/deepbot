# =========================================================
# 1) Required first (must set before first startup)
# =========================================================
DISCORD_BOT_TOKEN=your_discord_bot_token
OPENAI_API_KEY=your_openai_api_key
AUTH_PASSPHRASE=change-this-passphrase

# =========================================================
# 2) Usually safe to keep defaults
# =========================================================
OPENAI_BASE_URL=
OPENAI_MODEL_ID=gpt-4o-mini
DEEPBOT_CONFIG_DIR=/app/config
MCP_CONFIG_PATH=/app/config/mcp.json
MCP_HOST_GATEWAY=host.docker.internal
WORKSPACE_DIR=/workspace
AGENT_MEMORY_DIR=/workspace/agent-memory/memory
STRANDS_TOOL_CONSOLE_MODE=disable
BYPASS_TOOL_CONSENT=true

# If empty, Strands default model resolution is used.
STRANDS_MODEL_PROVIDER=openai
# JSON string or path to JSON file.
STRANDS_MODEL_CONFIG={"params":{"temperature":0.2}}

# Short-term memory settings
SESSION_MAX_TURNS=10
SESSION_TTL_MINUTES=30

# Gateway behavior
AUTO_REPLY_ALL=true
AGENT_TIMEOUT_SECONDS=45
BOT_FALLBACK_MESSAGE=今ちょっと調子が悪いです。少し待ってからもう一度お願いします。
BOT_PROCESSING_MESSAGE=お調べしますね。少しお待ちください。
LOG_LEVEL=INFO

# =========================================================
# 3) Dangerous tool controls (advanced; change only if needed)
# =========================================================
# SECURITY: keep false unless you fully trust all users in the server/channel.
# true enables high-risk tools: file_read, file_write, editor, environment, shell
DANGEROUS_TOOLS_ENABLED=false
# Comma-separated allowlist applied only when DANGEROUS_TOOLS_ENABLED=true.
ENABLED_DANGEROUS_TOOLS=shell,file_read
# Enforce `srt --settings <path> -c "<command>"` on shell tool input.
SHELL_SRT_ENFORCED=true
SHELL_SRT_SETTINGS_PATH=/app/config/srt-settings.json
# shell command is rejected if it references these absolute path prefixes.
SHELL_DENY_PATH_PREFIXES=/app
# file_read/file_write/editor are restricted to these absolute roots.
TOOL_WRITE_ROOTS=/workspace

# =========================================================
# 4) Prompt/attachment security controls
# =========================================================
# Prompt-injection defender (internal-only)
DEFENDER_ENABLED=true
DEFENDER_DEFAULT_MODE=warn
DEFENDER_WARN_THRESHOLD=0.35
DEFENDER_BLOCK_THRESHOLD=0.95
DEFENDER_SANITIZE_MODE=full-redact

# Allowed hosts for remote attachment fetch (SSRF protection)
ATTACHMENT_ALLOWED_HOSTS=cdn.discordapp.com,media.discordapp.net

# =========================================================
# 5) Auth gate behavior
# =========================================================
# Fail-closed default: keep AUTH_REQUIRED=true.
AUTH_REQUIRED=true
AUTH_COMMAND=/auth
AUTH_IDLE_TIMEOUT_MINUTES=15
AUTH_WINDOW_MINUTES=10
AUTH_MAX_RETRIES=3
AUTH_LOCK_MINUTES=30
